doctrine_mongodb:
    auto_generate_proxy_classes: true
    auto_generate_hydrator_classes: true
    connections:
        default:
            server: '%env(MONGODB_URI)%'
            options: {}
    default_database: '%env(MONGODB_DB)%'
    document_managers:
        default:
            auto_mapping: true
            mappings:
                # User bounded context
                User:
                    type: attribute
                    dir: '%kernel.project_dir%/src/User/Domain/Model'
                    prefix: 'App\User\Domain\Model'
                    is_bundle: false
                
                # Circle bounded context
                Circle:
                    type: attribute
                    dir: '%kernel.project_dir%/src/Circle/Domain/Model'
                    prefix: 'App\Circle\Domain\Model'
                    is_bundle: false
                
                # Post bounded context
                Post:
                    type: attribute
                    dir: '%kernel.project_dir%/src/Post/Domain/Model'
                    prefix: 'App\Post\Domain\Model'
                    is_bundle: false
                
                # Comment bounded context
                Comment:
                    type: attribute
                    dir: '%kernel.project_dir%/src/Comment/Domain/Model'
                    prefix: 'App\Comment\Domain\Model'
                    is_bundle: false
                
                # Vote bounded context
                Vote:
                    type: attribute
                    dir: '%kernel.project_dir%/src/Vote/Domain/Model'
                    prefix: 'App\Vote\Domain\Model'
                    is_bundle: false
                
                # Moderation bounded context
                Moderation:
                    type: attribute
                    dir: '%kernel.project_dir%/src/Moderation/Domain/Model'
                    prefix: 'App\Moderation\Domain\Model'
                    is_bundle: false
                
                # AI bounded context
                AI:
                    type: attribute
                    dir: '%kernel.project_dir%/src/AI/Domain/Model'
                    prefix: 'App\AI\Domain\Model'
                    is_bundle: false

when@prod:
    doctrine_mongodb:
        auto_generate_proxy_classes: false
        auto_generate_hydrator_classes: false
        document_managers:
            default:
                metadata_cache_driver:
                    type: service
                    id: doctrine_mongodb.system_cache_pool

    framework:
        cache:
            pools:
                doctrine_mongodb.system_cache_pool:
                    adapter: cache.system
